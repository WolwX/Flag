<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Métadonnées Projet -->
    <meta name="author" content="Xavier (WolwX)">
    <meta name="description" content="Flag - Version Standalone v1.2 - Sensibilisation sÃ©curitÃ© informatique">
    <meta name="keywords" content="sécurité informatique, sensibilisation, BSoD, verrouillage, formation">
    <meta name="version" content="1.2-standalone">
    <meta name="release-date" content="2025-11-05">
    <meta name="repository" content="https://github.com/WolwX/Flag">
    <meta name="contact" content="wolwx@hotmail.com">
    <meta name="copyright" content="© 2025 Xavier (WolwX). All Rights Reserved.">
    <meta name="license" content="Proprietary - Tous droits réservés">
    
    <title>Erreur Critique de Sécurité</title>
    <style>
body{margin:0;padding:0;background-color:#0078D7;color:white;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;width:100vw;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;overflow:hidden;box-sizing:border-box}.config-panel{position:fixed;top:0;left:0;width:100vw;background:#e3f0ff;color:#222;padding:0.3em 0 0.3em 1vw;font-size:0.85em;display:flex;align-items:stretch;border-bottom:1px solid #b3d1f7;box-sizing:border-box;margin-bottom:0;z-index:1000;box-shadow:0 2px 12px rgba(0,0,0,0.1);height:52px}.config-bar-grid{display:flex;flex-direction:row;align-items:center;justify-content:space-around;gap:0.5em;width:calc(100% - 130px);height:100%;position:relative}.config-group{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:100px;max-width:150px;flex:1 1 0;padding:0;box-sizing:border-box;gap:0.2em}.config-label{font-weight:600;font-size:0.8em;display:flex;align-items:center;justify-content:center;white-space:nowrap;flex-shrink:0;width:100%;text-align:center}.config-input{display:flex;align-items:center;justify-content:center;gap:0.3em;width:100%}.config-input input,.config-input select{font-size:0.85em;padding:0.2em 0.3em}.start-btn-vertical{height:100%;min-width:130px;width:130px;background:linear-gradient(135deg,#28a745 0%,#20c997 100%);color:#fff;font-weight:bold;font-size:1.1em;border:none;border-radius:0;box-shadow:0 2px 8px rgba(0,0,0,0.2);cursor:pointer;letter-spacing:0.15em;transition:background 0.2s,box-shadow 0.2s,transform 0.1s;outline:none;display:flex;flex-direction:row;align-items:center;justify-content:center;margin:0;padding:0 1.2em 0 1.5em;gap:0.6em;position:absolute;right:0;top:0;bottom:0}.start-btn-vertical:hover,.start-btn-vertical:focus{background:linear-gradient(135deg,#34ce57 0%,#28efb5 100%);box-shadow:0 4px 16px rgba(0,0,0,0.25);transform:scale(1.03)}.bsod-container{display:flex;flex-direction:row;width:100vw;height:100vh}.bsod-box-left{width:50vw;min-width:350px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;padding-left:7vw;padding-top:7vh}.bsod-box-right{width:50vw;min-width:200px;position:relative;display:flex;align-items:center;justify-content:center;min-height:100vh}.smiley{font-size:8vw;font-weight:200;margin-bottom:1vw;color:#fff;user-select:none;text-align:left}.main-message{max-width:50vw;width:100%;margin-bottom:0}.main-message p{font-size:2vw;color:#fff;font-weight:400;line-height:1.2;text-align:left;word-break:break-word}.main-message .secondary-message{display:block;font-size:1.2vw;font-weight:300;margin-top:0.8vw}.red-flag-emoji{font-size:1.2em;vertical-align:middle;color:#e53935;margin-left:0.15em;filter:drop-shadow(0 0 1px #fff)}.footer-row{width:100%;display:flex;flex-direction:row;align-items:flex-start;margin-top:0.5vw;margin-bottom:2vw;gap:1.5vw}.footer-left{flex:1 1 50%;display:flex;flex-direction:column;align-items:stretch}.footer-right{flex:1 1 50%;min-height:60px}.completion-text{font-size:1.6vw;font-weight:300;color:#fff;margin:0;text-align:left;white-space:nowrap;flex-shrink:0}.footer-inline{display:flex;flex-direction:row;align-items:center;gap:1vw;white-space:nowrap;justify-content:space-between;width:100%}.info-area{width:100%;display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;margin-top:0 !important;margin-bottom:0;gap:1.5vw}.qr-section{display:flex;flex-direction:column;gap:0.5vw;width:100%}.qr-row{display:flex;flex-direction:row;align-items:flex-start;gap:1vw}.qr-image-block{flex-shrink:0}.qr-code{width:9.1vw;height:9.1vw;min-width:117px;min-height:117px;max-width:156px;max-height:156px;flex-shrink:0;border-radius:0;background:none;border:none;display:block}.qr-text-block{display:flex;flex-direction:column;gap:0.5vw;flex:1}.qr-description{font-size:0.95vw;font-weight:300;line-height:1.3;color:#fff}.qr-description p{margin:0;padding:0}.code-defaillance{font-size:1vw;font-weight:300;line-height:1.3;color:#fff}.code-defaillance p{margin:0;padding:0}.branding-line{font-size:1vw !important;font-style:italic !important;font-weight:300 !important;color:rgba(255,255,255,0.8) !important;margin-top:1vw;padding-top:0.5vw;text-align:left;line-height:1.3}.branding-icon{text-decoration:none;color:rgba(255,255,255,0.7);font-size:1em;margin-left:0.4em;transition:color 0.2s,transform 0.2s;display:inline-block;cursor:pointer}.branding-icon:hover{color:rgba(255,255,255,1);transform:scale(1.2)}.branding-icon i{vertical-align:middle}.right-content{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.custom-message-display{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:2.5vw;font-weight:500;text-align:center;z-index:10;padding:1em;max-width:80%;word-wrap:break-word;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.timer-display{position:absolute;top:10%;left:50%;transform:translateX(-50%);color:#fff;text-align:center;z-index:10;padding:0.8em;max-width:80%}.timer-label{font-size:1.5vw;font-weight:400;margin:0 0 0.3em 0;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.timer-text{font-size:4vw;font-weight:700;margin:0;letter-spacing:0.1em;text-shadow:3px 3px 6px rgba(0,0,0,0.4);font-family:'Consolas','Courier New',monospace}.emoji-bg-preview{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:20vw;opacity:0.3;user-select:none;pointer-events:none;position:absolute;top:0;left:0;z-index:1;box-sizing:border-box}.reward-display{position:absolute;bottom:30%;left:50%;transform:translateX(-50%);color:#fff;text-align:center;z-index:10;padding:1em;max-width:80%}.reward-label{font-size:1.3vw;font-weight:600;margin:0 0 0.5em 0;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.reward-text{font-size:2vw;font-weight:500;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}#codeInput{padding:10px;width:180px;max-width:30vw;border:none;border-radius:4px;font-size:1.1vw;color:#222;background:#fff;outline:none}button{padding:10px 22px;background-color:#fff;color:#0078D7;border:none;border-radius:4px;cursor:pointer;font-size:1.1vw;font-weight:bold;transition:background-color 0.3s}button:hover{background-color:#e6e6e6}h1{font-size:2.5vw;font-weight:400;margin-top:0;margin-bottom:2vw;line-height:1.2;text-align:left;color:#fff}.content p{font-size:1.3vw;line-height:1.5;margin-bottom:1.2vw;font-weight:300;max-width:700px;text-align:left;color:#fff}#custom-message{margin-bottom:0.7vw}
</style> 
</head>
<body id="bodyFlag">
    <!-- Config Bar -->
    <div class="config-panel">
        <div class="config-bar-grid">
            <!-- Icône d'ambiance -->
            <div class="config-group">
                <div class="config-label"><label for="iconEmojiSelect">Icône</label></div>
                <div class="config-input">
                    <select id="iconEmojiSelect" style="width:120px;">
                        <option value="" selected>Aucun</option>
                        <option value="🚩">🚩 Flag</option>
                        <option value="😊">😊 Sourire</option>
                        <option value="😅">😅 Gêné</option>
                        <option value="😎">😎 Cool</option>
                        <option value="😬">😬 Embarrassé</option>
                        <option value="😘">😘 Bisou</option>
                        <option value="❤️">❤️ Cœur</option>
                        <option value="👮">👮 Policier</option>
                        <option value="🔒">🔒 Prison</option>
                        <option value="🎉">🎉 Fête</option>
                        <option value="☕">☕ Café</option>
                        <option value="🥐">🥐 Croissant</option>
                        <option value="🍫">🍫 Chocolat</option>
                        <option value="🍰">🍰 Gâteau</option>
                        <option value="🏆">🏆 Trophée</option>
                    </select>
                    <span id="iconEmojiPreview" style="font-size: 1.5em; margin-left:0.3em;"></span>
                </div>
            </div>
            <!-- Couleur principale -->
            <div class="config-group">
                <div class="config-label"><label for="mainColorInput">🎨 Couleur</label></div>
                <div class="config-input">
                    <input type="text" id="mainColorInput" value="#0078d7" maxlength="7" style="width:65px; text-transform:uppercase; font-size:0.85em;" />
                    <span id="colorPalette" style="display:flex; gap:3px; margin-left:0.3em;">
                        <button class="color-btn" data-color="#0078d7" title="Bleu" style="background:#0078d7; width:16px; height:16px; border:1px solid #ccc; cursor:pointer; border-radius:2px; padding:0;"></button>
                        <button class="color-btn" data-color="#e81123" title="Rouge" style="background:#e81123; width:16px; height:16px; border:1px solid #ccc; cursor:pointer; border-radius:2px; padding:0;"></button>
                        <button class="color-btn" data-color="#ff00ff" title="Magenta" style="background:#ff00ff; width:16px; height:16px; border:1px solid #ccc; cursor:pointer; border-radius:2px; padding:0;"></button>
                        <button class="color-btn" data-color="#00b300" title="Vert" style="background:#00b300; width:16px; height:16px; border:1px solid #ccc; cursor:pointer; border-radius:2px; padding:0;"></button>
                    </span>
                </div>
            </div>
            <!-- Pris en Flag par -->
            <div class="config-group">
                <div class="config-label"><label for="inputFlagger">🚩 Flag par</label></div>
                <div class="config-input"><input type="text" id="inputFlagger" placeholder="Nom" style="width:100%;" /></div>
            </div>
            <!-- Texte perso -->
            <div class="config-group">
                <div class="config-label"><input type="checkbox" id="toggleCustomText" checked /><label for="toggleCustomText" style="margin-left:0.3em;">💬 Message perso</label></div>
                <div class="config-input"><input type="text" id="inputCustomText" placeholder="Texte..." style="width:100%; min-width:150px;" /></div>
            </div>
            <!-- Récompense -->
            <div class="config-group">
                <div class="config-label"><label for="selectReward">🏆 Récompense</label></div>
                <div class="config-input">
                    <select id="selectReward" style="width:100%;">
                        <option value="" selected>Aucun</option>
                        <option value="☕ Café">☕ Café</option>
                        <option value="🥤 Boisson">🥤 Boisson</option>
                        <option value="🥐 Croissant">🥐 Croissant</option>
                        <option value="🍫 Chocolat">🍫 Chocolat</option>
                        <option value="� Bonbon">🍬 Bonbon</option>
                        <option value="�🍰 Gâteau">🍰 Gâteau</option>
                        <option value="🍕 Pizza">🍕 Pizza</option>
                        <option value="🍽️ Repas">🍽️ Repas</option>
                        <option value="🍺 Bière">🍺 Bière</option>
                        <option value="💋 Bisous">💋 Bisous</option>
                        <option value="🤗 Câlin">🤗 Câlin</option>
                        <option value="🤝 Service">🤝 Service</option>
                    </select>
                </div>
            </div>
            <!-- Verrouillage -->
            <div class="config-group">
                <div class="config-label"><input type="checkbox" id="toggleLock" /><label for="toggleLock" style="margin-left:0.3em;">🔒 Lock</label></div>
                <div class="config-input"><input type="text" id="inputSecurityCode" placeholder="Code" style="width:100%;" /></div>
            </div>
        </div>
        
        <!-- Bouton START -->
        <button class="start-btn-vertical" id="startBtn">
            <span style="font-weight: 900;">FLAG</span>
            <span style="font-size:1.4em;">🚩</span>
        </button>
    </div>
    
    <!-- Contenu principal BSoD -->
    <div class="bsod-container">
        <div class="bsod-box-left">
            <div class="smiley">:(</div>
            <div class="main-message">
                <p>
                    Votre ordinateur a rencontré un problème de sécurité et doit être débloqué.<br>
                    <span class="secondary-message">Votre session n'a pas été verrouillée. <b><span id="flaggerName1">Un collègue vigilant</span></b> a placé un <b>Flag <span class="red-flag-emoji">🚩</span></b> sur votre poste.<br>
                    Ceci est un exercice de sensibilisation.<br>
                    Pour débloquer, entrez le code de sécurité communiqué par <b><span id="flaggerName2">votre collègue</span></b>.</span>
                </p>
            </div>
            <div class="footer-row">
                <div class="footer-left">
                    <span class="completion-text">100% achevés</span>
                </div>
                <!-- Section pour déblocage AVEC code (quand lock activé) -->
                <div class="footer-right" id="unlockSection" style="display:none;">
                    <div class="footer-inline">
                        <input type="password" id="codeInput" placeholder="Code de sécurité..." autofocus>
                        <button onclick="checkCode()">DÉBLOQUER</button>
                    </div>
                </div>
            </div>
            <div class="info-area">
                <div class="qr-section">
                    <div class="qr-row">
                        <div class="qr-image-block">
                            <img class="qr-code" src="" alt="QR Code Flag">                             
                        </div>
                        <div class="qr-text-block">
                            <div class="qr-description">
                                <p>Pour plus d'informations sur les bonnes pratiques de sécurité, scannez le code.</p>
                            </div>
                            <div class="code-defaillance">
                                <p>Code de défaillance : <b>OUBLI_VERROUILLAGE</b></p>
                            </div>
                            <div class="branding-line">
                                Sensibilisation hygiène numérique<span id="clientName"></span> by XR
                                <a href="https://www.wolwx.net" target="_blank" id="brandingLink" class="branding-icon" title="Plus d'infos">ℹ️</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bsod-box-right">
            <div class="right-content">
                <div id="timerDisplay" class="timer-display" style="display:none;">
                    <p class="timer-label">⏱️ Flaggé depuis</p>
                    <p id="timerText" class="timer-text">00:00</p>
                </div>
                <!-- Bouton pour déverrouillage SANS code (quand lock désactivé) -->
                <div id="simpleUnlockSection" style="display:none;position:absolute;top:28%;left:50%;transform:translateX(-50%);z-index:20;">
                    <button onclick="simpleUnlock()" style="background-color:#28a745;color:#fff;font-size:1.3vw;padding:15px 40px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;box-shadow:0 4px 15px rgba(0,0,0,0.3);transition:all 0.3s;" onmouseover="this.style.backgroundColor='#218838';this.style.transform='scale(1.05)';" onmouseout="this.style.backgroundColor='#28a745';this.style.transform='scale(1)';">🔓 Déverrouiller mon écran</button>
                </div>
                <p id="customMessageDisplay" class="custom-message-display"></p>
                <div id="emoji-bg-preview" class="emoji-bg-preview"></div>
                <div id="rewardDisplay" class="reward-display">
                    <p class="reward-label">Récompense attendue :</p>
                    <p id="rewardText" class="reward-text"></p>
                </div>
            </div>
        </div>
    </div>
    <script>
// QR Code Base64 (flag.wolwx.net)
const QR_CODE_BASE64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAJvWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OSwgMjAyMi8wNi8xMy0xNzo0NjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMy41IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjUtMTEtMDVUMjI6NDY6MzUrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI1LTExLTA1VDIyOjUwOjA0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI1LTExLTA1VDIyOjUwOjA0KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNTVlYzAxOS0xNmJmLWU4NDQtYWY3Yy05ZjMzZGQxMjhlYmYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjNTc2NjJjMS00ZjI1LWM1NDEtYjg2NS1lNjg2MDA1Njk0MjQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYzA5MjRiMC01MWNiLTRmNDUtYmE2ZS0xN2I0MDkyY2MwYjciPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmRjMDkyNGIwLTUxY2ItNGY0NS1iYTZlLTE3YjQwOTJjYzBiNyIgc3RFdnQ6d2hlbj0iMjAyNS0xMS0wNVQyMjo0NjozNSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gaW1hZ2UvcG5nIHRvIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkwZmZmMjNhLWMyN2EtZmU0Ny1iNGIxLTM3ZTljNDAzNWUzMCIgc3RFdnQ6d2hlbj0iMjAyNS0xMS0wNVQyMjo0OTo0NCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjMGE1ZmFkMi04OGJjLTIwNGYtOGM4MC00YjliZjIwYTc4Y2IiIHN0RXZ0OndoZW49IjIwMjUtMTEtMDVUMjI6NTA6MDQrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy41IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZDU1ZWMwMTktMTZiZi1lODQ0LWFmN2MtOWYzM2RkMTI4ZWJmIiBzdEV2dDp3aGVuPSIyMDI1LTExLTA1VDIyOjUwOjA0KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjMuNSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMwYTVmYWQyLTg4YmMtMjA0Zi04YzgwLTRiOWJmMjBhNzhjYiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpkYzA5MjRiMC01MWNiLTRmNDUtYmE2ZS0xN2I0MDkyY2MwYjciIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYzA5MjRiMC01MWNiLTRmNDUtYmE2ZS0xN2I0MDkyY2MwYjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6X0iOKAAA8qElEQVR4nO3d+5uddX3v//cccmCyciKZhCARMYHFyUNUBGmpWhXdK1+othGplvjVXWtpWnex0lq1YLnaLba7Wq1YqVYR6oHIrnjIKCgqoqEIJHIKTgAJJCQhySSZzOQwkznsHxpyBUxCCODnnrwfj3+A17Xuda/7Xs81uWkaHh4eDgAAAOCQ1lx6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...TRUNCATED...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";

// Fonction globale pour gérer le verrouillage
function updateLockState() {
    const toggleLock = document.getElementById('toggleLock');
    const inputSecurityCode = document.getElementById('inputSecurityCode');
    const unlockSection = document.getElementById('unlockSection');
    const simpleUnlockSection = document.getElementById('simpleUnlockSection');
    
    if (toggleLock && toggleLock.checked) {
        // Lock activé : afficher le champ code dans la config
        if (inputSecurityCode) {
            inputSecurityCode.style.display = '';
        }
        // Les sections de déverrouillage restent cachées jusqu'au clic sur "Envoyer Flag"
        if (unlockSection) {
            unlockSection.style.display = 'none';
        }
        if (simpleUnlockSection) {
            simpleUnlockSection.style.display = 'none';
        }
    } else {
        // Lock désactivé : cacher le champ code dans la config
        if (inputSecurityCode) {
            inputSecurityCode.style.display = 'none';
        }
        // Les sections de déverrouillage restent cachées jusqu'au clic sur "Envoyer Flag"
        if (unlockSection) {
            unlockSection.style.display = 'none';
        }
        if (simpleUnlockSection) {
            simpleUnlockSection.style.display = 'none';
        }
    }
}

// Variables dynamiques pour la version 1.2
document.addEventListener('DOMContentLoaded', function() {
    // Charger le QR code depuis la variable
    const qrImage = document.querySelector('.qr-code');
    if (qrImage) {
        qrImage.src = QR_CODE_BASE64;
    }
    
    // Variables globales
    let currentFlaggerName = 'votre collègue vigilant'; // Nom par défaut
    
    // Variables pour le timer
    let timerInterval = null;
    let startTime = null;
    const timerDisplay = document.getElementById('timerDisplay');
    const timerText = document.getElementById('timerText');
    
    // Fonction pour démarrer le chronomètre
    function startTimer() {
        if (timerInterval) return; // Empêche les multiples démarrages
        
        startTime = Date.now();
        if (timerDisplay) timerDisplay.style.display = 'block';
        
        timerInterval = setInterval(function() {
            const elapsed = Date.now() - startTime;
            const seconds = Math.floor(elapsed / 1000);
            const minutes = Math.floor(seconds / 60);
            const displaySeconds = seconds % 60;
            
            const formattedTime = 
                String(minutes).padStart(2, '0') + ':' + 
                String(displaySeconds).padStart(2, '0');
            
            if (timerText) timerText.textContent = formattedTime;
        }, 1000);
    }
    
    // Fonction pour arrêter le chronomètre
    function stopTimer() {
        if (timerInterval) {
            clearInterval(timerInterval);
            timerInterval = null;
        }
        // Retourner le temps écoulé en secondes
        if (startTime) {
            return Math.floor((Date.now() - startTime) / 1000);
        }
        return 0;
    }
    
    // Fonction de déverrouillage simple (sans code)
    window.simpleUnlock = function() {
        // Arrêter le timer et récupérer le temps écoulé
        const unlockTime = stopTimer();
        
        // Sortir du mode plein écran
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
        } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
        }
        
        // Afficher message de succès
        const flaggerNameElement = document.getElementById('flaggerName1');
        const currentName = flaggerNameElement ? flaggerNameElement.textContent : 'votre collègue vigilant';
        
        let successMessage = '✅ Écran déverrouillé\n\n';
        successMessage += `Signalé par : ${currentName}`;
        successMessage += `\n\nTemps écoulé : ${Math.floor(unlockTime / 60)}min ${unlockTime % 60}s`;
        
        showSuccessMessage(successMessage);
        
        // Fermeture après 3 secondes
        setTimeout(function() {
            window.close();
            setTimeout(function() {
                document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#28a745;color:#fff;font-family:Consolas,monospace;text-align:center;flex-direction:column;"><h1 style="font-size:3vw;margin-bottom:1em;">✅ Écran déverrouillé !</h1><p style="font-size:1.5vw;margin-bottom:2em;">Vous pouvez fermer cet onglet</p><p style="font-size:1.2vw;opacity:0.8;">(Appuyez sur Ctrl+W ou fermez l\'onglet manuellement)</p></div>';
            }, 100);
        }, 3000);
    };
    
    // START button logic
    const startBtn = document.getElementById('startBtn');
    const configPanel = document.querySelector('.config-panel');
    const simpleUnlockSection = document.getElementById('simpleUnlockSection');
    if (startBtn) {
        startBtn.addEventListener('click', function() {
            // Démarrer le chronomètre
            startTimer();
            
            // Plein écran
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }
            // Masquer la config bar
            if (configPanel) configPanel.style.display = 'none';
            
            // Afficher le bon bouton de déverrouillage selon le mode lock
            if (toggleLock && toggleLock.checked) {
                // Lock activé : afficher section avec code
                if (unlockSection) unlockSection.style.display = 'block';
                if (simpleUnlockSection) simpleUnlockSection.style.display = 'none';
            } else {
                // Lock désactivé : afficher bouton simple
                if (unlockSection) unlockSection.style.display = 'none';
                if (simpleUnlockSection) simpleUnlockSection.style.display = 'block';
            }
        });
    }
    // Gestion de l'icône emoji
    const iconEmojiSelect = document.getElementById('iconEmojiSelect');
    const iconEmojiPreview = document.getElementById('iconEmojiPreview');
    const emojiBgPreview = document.getElementById('emoji-bg-preview');
    function setIconEmoji(val) {
        const emoji = val && val.trim() ? val.trim() : '';
        if (iconEmojiPreview) iconEmojiPreview.textContent = emoji;
        if (emojiBgPreview) {
            emojiBgPreview.textContent = emoji;
            // Si aucune icône, cacher complètement l'élément
            emojiBgPreview.style.display = emoji ? 'flex' : 'none';
        }
    }
    if (iconEmojiSelect) {
        iconEmojiSelect.addEventListener('change', function() {
            setIconEmoji(iconEmojiSelect.value);
        });
        // Valeur par défaut
        setIconEmoji(iconEmojiSelect.value);
    }
    // Gestion de la couleur principale
    const mainColorInput = document.getElementById('mainColorInput');
    const colorPalette = document.getElementById('colorPalette');
    const bsodContainer = document.querySelector('.bsod-container');
    
    function setMainColor(hex) {
        // Applique la couleur principale sur le body (ou root)
        document.documentElement.style.setProperty('--main-color', hex);
        if (mainColorInput) mainColorInput.value = hex.toUpperCase();
        // Applique au background de la page
        if (bsodContainer) {
            bsodContainer.style.backgroundColor = hex;
        }
        document.body.style.backgroundColor = hex;
    }
    // Palette boutons
    if (colorPalette) {
        colorPalette.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                setMainColor(this.getAttribute('data-color'));
            });
        });
    }
    // Champ hexadécimal
    if (mainColorInput) {
        mainColorInput.addEventListener('input', function() {
            const val = mainColorInput.value;
            if (/^#[0-9A-Fa-f]{6}$/.test(val)) {
                setMainColor(val);
            }
        });
        // Valeur par défaut
        setMainColor(mainColorInput.value);
    }
    const inputFlagger = document.getElementById('inputFlagger');
    const flaggerName1 = document.getElementById('flaggerName1');
    const flaggerName2 = document.getElementById('flaggerName2');
    const toggleCustomText = document.getElementById('toggleCustomText');
    const inputCustomText = document.getElementById('inputCustomText');
    const customMessageDisplay = document.getElementById('customMessageDisplay');
    const selectReward = document.getElementById('selectReward');
    const rewardDisplay = document.getElementById('rewardDisplay');
    const rewardText = document.getElementById('rewardText');
    const toggleLock = document.getElementById('toggleLock');
    const inputSecurityCode = document.getElementById('inputSecurityCode');
    const unlockSection = document.getElementById('unlockSection');
    
    // Nom du collègue
    if (inputFlagger) {
        inputFlagger.addEventListener('input', function() {
            const name = inputFlagger.value.trim();
            currentFlaggerName = name ? name : 'votre collègue vigilant'; // Mise à jour globale
            if (flaggerName1) {
                flaggerName1.textContent = name ? name : 'Un collègue vigilant';
            }
            if (flaggerName2) {
                flaggerName2.textContent = name ? name : 'votre collègue';
            }
            // Met à jour le titre de la page
            document.title = name ? `Pris en Flag par ${name}` : 'Pris en Flag';
        });
    }
    
    // Message personnalisé
    if (inputCustomText && customMessageDisplay) {
        inputCustomText.addEventListener('input', function() {
            const message = inputCustomText.value.trim();
            // Afficher seulement si le toggle est activé ET qu'il y a un message
            if (toggleCustomText && toggleCustomText.checked && message) {
                customMessageDisplay.textContent = message;
                customMessageDisplay.style.display = 'block';
            } else {
                customMessageDisplay.style.display = 'none';
            }
        });
    }
    
    // Toggle du message personnalisé
    if (toggleCustomText && customMessageDisplay && inputCustomText) {
        toggleCustomText.addEventListener('change', function() {
            if (toggleCustomText.checked) {
                // Activé : afficher le message s'il existe
                const message = inputCustomText.value.trim();
                if (message) {
                    customMessageDisplay.textContent = message;
                    customMessageDisplay.style.display = 'block';
                }
            } else {
                // Désactivé : masquer le message
                customMessageDisplay.style.display = 'none';
            }
        });
    }
    
    // Récompense
    if (selectReward && rewardDisplay && rewardText) {
        selectReward.addEventListener('change', function() {
            const reward = selectReward.value.trim();
            if (reward) {
                rewardText.textContent = reward;
                rewardDisplay.style.display = 'block';
            } else {
                rewardDisplay.style.display = 'none';
            }
        });
        // Initialisation (caché par défaut car "Aucun" est sélectionné)
        rewardDisplay.style.display = 'none';
    }
    
    // Initialisation du titre
    document.title = 'Pris en Flag';

    if (toggleLock) {
        toggleLock.addEventListener('change', updateLockState);
        // Initialisation (désactivé par défaut)
        updateLockState();
    }
});
// --- 🚩 CONFIGURATION IMPORTANTE (À MODIFIER) ---

// L'URL de votre futur serveur (Backend) qui enregistrera l'événement de Flag
const URL_SERVEUR_LOG = "http://votre-serveur/api/enregistrer_flag"; 

// --- VARIABLES GLOBALES ---

let expectedCode = "RECOMPENSE"; // Code par défaut si l'URL ne fournit pas de code
let flaggerName = "Un Collègue Vigilant"; // Nom par défaut

// --- FONCTIONS LOGIQUES ---

function getUrlParameters() {
    /** Récupère les paramètres de l'URL et met à jour le contenu/code secret **/
    const urlParams = new URLSearchParams(window.location.search);
    
    // 1. Définition du Code Secret
    if (urlParams.has('code')) {
        const code = urlParams.get('code').trim().toUpperCase();
        expectedCode = code;
        const codeInput = document.getElementById('inputSecurityCode');
        if (codeInput) {
            codeInput.value = code;
        }
    }
    
    // 2. Définition du Nom du Flagger (pour le message de reward)
    if (urlParams.has('flagger')) {
        const name = urlParams.get('flagger').trim();
        flaggerName = name;
        currentFlaggerName = name;
        const nameInput = document.getElementById('flaggerName');
        if (nameInput) {
            nameInput.value = name;
        }
        // Mise à jour des affichages
        const flaggerSpans = document.querySelectorAll('.flagger-name');
        flaggerSpans.forEach(span => {
            span.textContent = name;
        });
    }
    
    // 3. Mise à jour du Message personnalisé
    const customMessageElement = document.getElementById('custom-message');
    if (urlParams.has('msg') && customMessageElement) {
        const msg = decodeURIComponent(urlParams.get('msg')); 
        customMessageElement.innerHTML = msg;
        const msgInput = document.getElementById('customMessage');
        if (msgInput) {
            msgInput.value = msg;
        }
    }
    
    // 4. Définition de l'Icône emoji
    if (urlParams.has('icon')) {
        const icon = decodeURIComponent(urlParams.get('icon'));
        const iconSelect = document.getElementById('iconEmojiSelect');
        if (iconSelect) {
            iconSelect.value = icon;
            // Déclencher manuellement l'update
            const emojiBgPreview = document.getElementById('emojiBgPreview');
            if (emojiBgPreview) {
                emojiBgPreview.textContent = icon;
                emojiBgPreview.style.display = icon ? 'flex' : 'none';
            }
        }
    }
    
    // 5. Définition de la Couleur de fond
    if (urlParams.has('color')) {
        const color = urlParams.get('color').toLowerCase();
        const colorMap = {
            'blue': '#0078d7',
            'red': '#e81123',
            'magenta': '#ff00ff',
            'green': '#00b300'
        };
        
        let hexColor;
        if (colorMap[color]) {
            // Couleur prédéfinie
            hexColor = colorMap[color];
        } else if (color.startsWith('#')) {
            // Code HEX avec #
            hexColor = color;
        } else if (/^[0-9a-f]{6}$/i.test(color)) {
            // Code HEX sans #
            hexColor = '#' + color;
        }
        
        if (hexColor) {
            // Appliquer la couleur
            document.documentElement.style.setProperty('--main-color', hexColor);
            const bsodContainer = document.querySelector('.bsod-container');
            if (bsodContainer) {
                bsodContainer.style.backgroundColor = hexColor;
            }
            document.body.style.backgroundColor = hexColor;
            
            // Mettre à jour l'input
            const mainColorInput = document.getElementById('mainColorInput');
            if (mainColorInput) {
                mainColorInput.value = hexColor.toUpperCase();
            }
        }
    }
    
    // 6. Définition de la Récompense
    if (urlParams.has('reward')) {
        const reward = decodeURIComponent(urlParams.get('reward'));
        const rewardSelect = document.getElementById('selectReward');
        const rewardDisplay = document.getElementById('rewardDisplay');
        const rewardText = document.getElementById('rewardText');
        
        if (rewardSelect) {
            rewardSelect.value = reward;
            // Appliquer visuellement
            if (reward && rewardText) {
                rewardText.textContent = reward;
                if (rewardDisplay) {
                    rewardDisplay.style.display = 'block';
                }
            } else {
                if (rewardDisplay) {
                    rewardDisplay.style.display = 'none';
                }
            }
        }
    }
    
    // 7. Définition de l'État du Verrouillage
    if (urlParams.has('lock')) {
        const lockValue = urlParams.get('lock').toLowerCase();
        const lockToggle = document.getElementById('toggleLock');
        if (lockToggle) {
            lockToggle.checked = (lockValue === 'true' || lockValue === '1' || lockValue === 'on');
            updateLockState();
        }
    }
    
    // 8. Paramètre client pour personnalisation branding
    if (urlParams.has('client')) {
        const clientName = decodeURIComponent(urlParams.get('client'));
        const clientNameSpan = document.getElementById('clientName');
        if (clientNameSpan) {
            clientNameSpan.textContent = clientName;
        }
    }
    
    // 9. URL de branding personnalisée
    if (urlParams.has('brandingurl')) {
        const brandingUrl = decodeURIComponent(urlParams.get('brandingurl'));
        const brandingLink = document.getElementById('brandingLink');
        if (brandingLink) {
            brandingLink.href = brandingUrl;
        }
    }
}


function enterFullscreen() {
    /** Tente de mettre la page en plein écran pour maximiser l'effet de blocage **/
    const body = document.getElementById('bodyFlag');
    // Tente de mettre en plein écran avec les différentes méthodes de navigateur
    if (body.requestFullscreen) {
        body.requestFullscreen();
    } else if (body.mozRequestFullScreen) {
        body.mozRequestFullScreen();
    } else if (body.webkitRequestFullscreen) { 
        body.webkitRequestFullscreen();
    } else if (body.msRequestFullscreen) { 
        body.msRequestFullscreen();
    }
}


function checkCode() {
    /** Vérifie le code entré par l'utilisateur ciblé **/
    const codeInput = document.getElementById('codeInput');
    const codeEntré = codeInput.value.trim().toUpperCase();
    
    // Récupérer le code de sécurité défini dans la config bar
    const inputSecurityCode = document.getElementById('inputSecurityCode');
    const securityCode = inputSecurityCode ? inputSecurityCode.value.trim().toUpperCase() : '';
    
    // Si un code est défini dans la config, l'utiliser
    // Sinon, si aucun code n'est défini (vide), accepter un code vide
    // Pour compatibilité URL, utiliser expectedCode seulement si pas de config bar
    let codeAttendu;
    if (inputSecurityCode) {
        // Config bar présente : utiliser le code configuré (même si vide)
        codeAttendu = securityCode;
    } else {
        // Pas de config bar (URL directe) : utiliser expectedCode
        codeAttendu = expectedCode;
    }

    // Vérification du code
    if (codeEntré === codeAttendu) { 
        // Code correct : Déblocage
        // Récupérer le nom du flagger et la récompense
        const flaggerNameElement = document.getElementById('flaggerName1');
        const currentName = flaggerNameElement ? flaggerNameElement.textContent : 'votre collègue vigilant';
        const rewardTextElement = document.getElementById('rewardText');
        const currentReward = rewardTextElement ? rewardTextElement.textContent : '';
        
        // Construire le message de succès
        let successMessage = '✅ Félicitations ! Code correct.\nSession débloquée.\n\n';
        successMessage += `Votre collègue : ${currentName}`;
        if (currentReward) {
            successMessage += `\nmérite son reward : ${currentReward}`;
        }
        
        // Afficher le message de succès
        showSuccessMessage(successMessage);
        
        // Fermeture après 3 secondes
        setTimeout(function() {
            window.close();
            setTimeout(function() {
                document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#28a745;color:#fff;font-family:Consolas,monospace;text-align:center;flex-direction:column;"><h1 style="font-size:3vw;margin-bottom:1em;">✅ Débloqué avec succès !</h1><p style="font-size:1.5vw;margin-bottom:2em;">Vous pouvez fermer cet onglet</p><p style="font-size:1.2vw;opacity:0.8;">(Appuyez sur Ctrl+W ou fermez l\'onglet manuellement)</p></div>';
            }, 100);
        }, 3000);

    } else {
        // Code incorrect : Afficher message sans sortir du plein écran
        // Récupérer le nom du flagger depuis la page
        const flaggerNameElement = document.getElementById('flaggerName1');
        const currentName = flaggerNameElement ? flaggerNameElement.textContent : 'votre collègue vigilant';
        
        // Créer un message d'erreur temporaire sur la page
        showErrorMessage(`❌ Code invalide. Contactez ${currentName}.`);
        
        codeInput.value = ''; 
        codeInput.focus();
    }
}

// Fonction pour afficher un message d'erreur sans alert (qui fait sortir du plein écran)
function showErrorMessage(message) {
    // Créer ou réutiliser un élément pour le message d'erreur
    let errorDiv = document.getElementById('errorMessage');
    if (!errorDiv) {
        errorDiv = document.createElement('div');
        errorDiv.id = 'errorMessage';
        errorDiv.style.position = 'fixed';
        errorDiv.style.top = '50%';
        errorDiv.style.left = '50%';
        errorDiv.style.transform = 'translate(-50%, -50%)';
        errorDiv.style.backgroundColor = 'rgba(232, 17, 35, 0.95)';
        errorDiv.style.color = '#fff';
        errorDiv.style.padding = '2em 3em';
        errorDiv.style.borderRadius = '8px';
        errorDiv.style.fontSize = '1.8vw';
        errorDiv.style.fontWeight = 'bold';
        errorDiv.style.zIndex = '10000';
        errorDiv.style.boxShadow = '0 8px 30px rgba(0,0,0,0.6)';
        errorDiv.style.textAlign = 'center';
        errorDiv.style.maxWidth = '80%';
        errorDiv.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        errorDiv.style.border = '3px solid #fff';
        document.body.appendChild(errorDiv);
    }
    
    errorDiv.textContent = message;
    errorDiv.style.display = 'block';
    errorDiv.style.opacity = '0';
    errorDiv.style.transform = 'translate(-50%, -50%) scale(0.8)';
    
    // Animation d'apparition
    setTimeout(function() {
        errorDiv.style.opacity = '1';
        errorDiv.style.transform = 'translate(-50%, -50%) scale(1)';
    }, 10);
    
    // Masquer après 3 secondes avec animation
    setTimeout(function() {
        errorDiv.style.opacity = '0';
        errorDiv.style.transform = 'translate(-50%, -50%) scale(0.8)';
        setTimeout(function() {
            errorDiv.style.display = 'none';
        }, 300);
    }, 3000);
}

// Fonction pour afficher un message de succès (même style mais en vert)
function showSuccessMessage(message) {
    // Créer ou réutiliser un élément pour le message de succès
    let successDiv = document.getElementById('successMessage');
    if (!successDiv) {
        successDiv = document.createElement('div');
        successDiv.id = 'successMessage';
        successDiv.style.position = 'fixed';
        successDiv.style.top = '50%';
        successDiv.style.left = '50%';
        successDiv.style.transform = 'translate(-50%, -50%)';
        successDiv.style.backgroundColor = 'rgba(40, 167, 69, 0.95)'; // Vert
        successDiv.style.color = '#fff';
        successDiv.style.padding = '2em 3em';
        successDiv.style.borderRadius = '8px';
        successDiv.style.fontSize = '1.6vw';
        successDiv.style.fontWeight = 'bold';
        successDiv.style.zIndex = '10000';
        successDiv.style.boxShadow = '0 8px 30px rgba(0,0,0,0.6)';
        successDiv.style.textAlign = 'center';
        successDiv.style.maxWidth = '80%';
        successDiv.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        successDiv.style.border = '3px solid #fff';
        successDiv.style.whiteSpace = 'pre-line'; // Permet les retours à la ligne
        successDiv.style.lineHeight = '1.5';
        document.body.appendChild(successDiv);
    }
    
    successDiv.textContent = message;
    successDiv.style.display = 'block';
    successDiv.style.opacity = '0';
    successDiv.style.transform = 'translate(-50%, -50%) scale(0.8)';
    
    // Animation d'apparition
    setTimeout(function() {
        successDiv.style.opacity = '1';
        successDiv.style.transform = 'translate(-50%, -50%) scale(1)';
    }, 10);
    
    // Pas de masquage automatique - on laisse 3 secondes avant la fermeture de la page
}

// Fonction d'enregistrement commentée pour le test local.
/*
function enregistrerFlag(success, flagger) {
    // Envoie l'information de faute au serveur (asynchrone)
    const data = {
        timestamp: new Date().toISOString(), 
        statut: success ? "FLAGGED_SUCCESS" : "FLAGGED_FAILED",
        code_secret: expectedCode,
        flagger_name: flagger,
    };

    fetch(URL_SERVEUR_LOG, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
    })
    .then(response => {
        console.log('Flag enregistré avec succès.');
    })
    .catch(error => {
        console.error('Erreur lors de l\'enregistrement du Flag:', error);
    });
}
*/


// --- DÉMARRAGE ET GESTION DES ÉVÉNEMENTS ---

window.onload = function() {
    // Récupère les paramètres de l'URL
    getUrlParameters();
    
    // NE PAS mettre en plein écran automatiquement
    // Le plein écran doit être déclenché uniquement par le bouton FLAG
    
    // Afficher le bon bouton de déverrouillage selon le mode lock
    updateLockState();
    
    // Focus sur le champ code seulement s'il est visible
    const codeInput = document.getElementById('codeInput');
    if (codeInput && codeInput.offsetParent !== null) {
        codeInput.focus();
        
        // Permet de valider en appuyant sur 'Entrée'
        codeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkCode();
            }
        });
    }

    // Empêche le clic droit pour éviter l'accès facile aux outils de développement
    document.addEventListener('contextmenu', event => event.preventDefault());
};
</script> 
</body>
</html>