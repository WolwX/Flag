FLAG - DOCUMENT DE R√âF√âRENCE TECHNIQUEROADMAP

=======================================-------

- 0.3 : Mise en place des variables (param√©trage dynamique)

INFORMATIONS G√âN√âRALES- 0.4 : Design valid√© pour la page gauche et droite avec variables/param√®tres

----------------------- 0.5 : D√©but de la partie serveur (backend, API)

- Nom du projet : Flag (Outil de sensibilisation √† la s√©curit√© informatique)- 0.6 : Serveur fonctionnel avec premiers enregistrements de donn√©es

- Technologie Front : HTML5 / CSS3 / JavaScript VanillaFLAG - DOCUMENT DE R√âF√âRENCE PROJET

- Technologie Back : Python/Flask ou Node.js/Express (pr√©vu v2.0)====================================

- Version actuelle : v1.1 (05/11/2025)

- Status : Production Ready (Frontend complet)INFORMATIONS G√âN√âRALES

- Objectif : Sensibiliser les collaborateurs via simulation BSoD----------------------

- D√©p√¥t GitHub : https://github.com/WolwX/Flag- Nom du projet : Flag (Outil de sensibilisation)

- D√©veloppeur : Xavier (WolwX) - wolwx@hotmail.com- Technologie Front : HTML5 / CSS3 / JavaScript (Vanilla)

- Technologie Back : Python / Flask (L√©ger et rapide)

STRUCTURE DES FICHIERS v1.1- Version actuelle : v0.2.1.20251030 (Front-end valid√©, design BSoD conforme)

---------------------------- Objectif : Pi√©ger les coll√®gues ayant une session ouverte (Code de s√©curit√©/Croissant).

/flag/- **D√©p√¥t GitHub** : https://github.com/WolwX/flag

‚îú‚îÄ‚îÄ index.html                      # Page principale avec config bar

‚îú‚îÄ‚îÄ test_url_params.html            # Page de test (12 exemples) [v1.1]STRUCTURE DES FICHIERS

‚îú‚îÄ‚îÄ README.md                       # Documentation compl√®te----------------------

‚îú‚îÄ‚îÄ EXEMPLES_URL.md                 # Guide param√®tres URL [v1.1]/flag/

‚îú‚îÄ‚îÄ URL_PARAMS_CONFIRMATION.md      # Doc technique URL [v1.1]‚îú‚îÄ‚îÄ index.html

‚îú‚îÄ‚îÄ css/‚îú‚îÄ‚îÄ app.py                      # Backend Python/Flask

‚îÇ   ‚îú‚îÄ‚îÄ flag_style.css              # Styles optimis√©s v1.0‚îú‚îÄ‚îÄ css/

‚îÇ   ‚îî‚îÄ‚îÄ flag_style_backup.css       # Backup version pr√©c√©dente‚îÇ   ‚îî‚îÄ‚îÄ flag_style.css          # Styles BSoD

‚îú‚îÄ‚îÄ js/‚îú‚îÄ‚îÄ js/

‚îÇ   ‚îî‚îÄ‚îÄ flag_script.js              # Logique + param√®tres URL‚îÇ   ‚îî‚îÄ‚îÄ flag_script.js          # Logique client

‚îú‚îÄ‚îÄ img/‚îî‚îÄ‚îÄ img/

‚îÇ   ‚îî‚îÄ‚îÄ qr_code.png                 # QR code sensibilisation    ‚îî‚îÄ‚îÄ qr_code.png             # QR Code (pour la blague ou la sensibilisation)

‚îî‚îÄ‚îÄ docs/

    ‚îú‚îÄ‚îÄ PROJECT_CONTEXT             # Vision globale du projetCONVENTIONS & CHEMINS

    ‚îî‚îÄ‚îÄ PROJECT_REFERENCE           # Ce fichier - R√©f√©rence technique---------------------

- **Endpoint API (Pr√©vu)** : POST vers `/api/flag` pour enregistrer l'√©v√©nement.

CONVENTIONS HTML- **Code de d√©blocage (Pr√©vu)** : V√©rification via POST vers `/api/check_code`.

----------------- **Param√®tres URL** :

### IDs Principaux (index.html)    - `?user=paul` : Utilisateur pi√©g√© (pour le logging).

    - `&flagger=marie` : Utilisateur qui a pos√© le Flag.

**Config Bar :**    - `&msg=message_perso` : Message affich√© √† la place du message de d√©blocage.

- iconEmojiSelect       : S√©lecteur d'ic√¥ne (16 options)- **Design** : Respecter l'alignement pr√©cis du BSoD, notamment pour les petits √©crans (`vw` pour les polices).

- mainColorInput        : Input couleur HEX

- colorPalette          : Container des 4 boutons couleursPROCHAINE √âTAPE

- flaggerName           : Input nom du flagger---------------

- customMessage         : Textarea message personnalis√©1. Impl√©menter le Backend Flask (`app.py`).

- selectReward          : S√©lecteur de r√©compense (13 options)2. Mettre √† jour le JavaScript (`js/flag_script.js`) pour la communication avec Flask.
- toggleLock            : Checkbox verrouillage
- inputSecurityCode     : Input code de s√©curit√© (visible si lock=true)
- startBtn              : Bouton FLAG (d√©clenche plein √©cran + timer)

**Affichages Dynamiques :**
- timerDisplay          : Container du chronom√®tre
- timerText             : Texte du timer (MM:SS)
- emojiBgPreview        : Affichage ic√¥ne emoji (center)
- customMessageDisplay  : Affichage message perso (top 40%)
- rewardDisplay         : Container r√©compense (bottom 30%)
- rewardText            : Texte de la r√©compense
- unlockSection         : Section d√©blocage (visible si lock=true)
- unlockInput           : Input pour saisir le code de d√©blocage

**Classes Principales :**
- .config-panel         : Barre de configuration (fixed top, 52px)
- .config-group         : Groupe de contr√¥les (flex)
- .bsod-container       : Container principal 2 colonnes
- .bsod-left            : Colonne gauche (BSoD classique)
- .bsod-right           : Colonne droite (√©l√©ments personnalisables)
- .timer-display        : Affichage chronom√®tre (top 10%)
- .custom-message-display : Message perso (top 40%)
- .emoji-bg-preview     : Ic√¥ne emoji (center)
- .reward-display       : R√©compense (bottom 30%)
- .footer-row           : Ligne de pied (margins: 0.5vw/2vw)

CONVENTIONS CSS
---------------
### Variables CSS
- --main-color          : Couleur principale (d√©faut: #0078d7)

### Couleurs Pr√©d√©finies
- Blue (Windows)        : #0078d7
- Red (Erreur)          : #e81123
- Magenta (Vif)         : #ff00ff
- Green (Succ√®s)        : #00b300

### Positionnement (Colonne Droite)
- Timer                 : top: 10%
- Message perso         : top: 40%
- Ic√¥ne emoji           : center (flex)
- R√©compense            : bottom: 30%

### Responsive
- Font-size en vw       : .sad-face (13vw), .main-message (3vw), etc.
- Layout 2 colonnes     : display: grid, grid-template-columns: 1fr 1fr
- Config bar            : flex-direction: row (horizontal compact)

CONVENTIONS JAVASCRIPT
----------------------
### Variables Globales (flag_script.js)
- currentFlaggerName    : Nom du flagger (d√©faut: "votre coll√®gue vigilant")
- timerInterval         : Interval du chronom√®tre
- startTime             : Timestamp de d√©marrage du timer
- expectedCode          : Code de s√©curit√© attendu (d√©fini par URL ou config)
- flaggerName           : Nom du flagger (pour messages)

### Fonctions Principales
- getUrlParameters()    : Lecture et application des 7 param√®tres URL
- startTimer()          : D√©marre le chronom√®tre (format MM:SS)
- stopTimer()           : Arr√™te le chronom√®tre
- checkCode()           : Valide le code saisi vs inputSecurityCode
- showErrorMessage(msg) : Affiche overlay rouge 3s
- showSuccessMessage(msg) : Affiche overlay vert 3s puis ferme
- updateLockState()     : Affiche/cache section d√©blocage selon toggleLock
- setIconEmoji(emoji)   : Met √† jour l'ic√¥ne affich√©e
- setMainColor(hex)     : Applique la couleur sur body + container

### Event Listeners
- startBtn click        : D√©marre timer + plein √©cran
- iconEmojiSelect change : Met √† jour l'ic√¥ne
- colorPalette buttons  : Change la couleur principale
- mainColorInput input  : Applique couleur HEX custom
- flaggerName input     : Met √† jour .flagger-name spans
- customMessage input   : Met √† jour #custom-message
- selectReward change   : Affiche/cache r√©compense
- toggleLock change     : updateLockState()

PARAM√àTRES URL v1.1
-------------------
### Liste Compl√®te (7 param√®tres)

1. **code** (String)
   - Description : Code de s√©curit√© pour d√©blocage
   - Format : Texte libre (converti en majuscules auto)
   - Exemple : ?code=SEC2024
   - Valeur par d√©faut : (aucune)

2. **flagger** (String)
   - Description : Nom du flagger (personne qui pose le flag)
   - Format : Texte libre
   - Exemple : ?flagger=Jean
   - Valeur par d√©faut : "votre coll√®gue vigilant"
   - Impact : Met √† jour tous les .flagger-name spans

3. **msg** (String)
   - Description : Message personnalis√© affich√©
   - Format : Texte avec espaces encod√©s (%20)
   - Exemple : ?msg=Attention%20phishing!
   - Valeur par d√©faut : (aucun)
   - Impact : Remplace le contenu de #custom-message

4. **icon** (String/Emoji)
   - Description : Ic√¥ne emoji affich√©e au centre
   - Format : Emoji ou texte
   - Exemple : ?icon=üö©
   - Options : Aucun, üö©, üòÄ, üòä, üòÇ, üòé, üòç, ü§î, üò±, üò°, üçï, üçî, üç∞, üç∫, üèÜ, ‚ö†Ô∏è
   - Valeur par d√©faut : (aucun)
   - Impact : Affiche dans #emojiBgPreview

5. **color** (String)
   - Description : Couleur de fond principale
   - Format : Nom pr√©d√©fini ou code HEX
   - Exemples : 
     * ?color=blue ‚Üí #0078d7
     * ?color=red ‚Üí #e81123
     * ?color=magenta ‚Üí #ff00ff
     * ?color=green ‚Üí #00b300
     * ?color=ff5733 ‚Üí #ff5733 (orange)
     * ?color=#2ecc71 ‚Üí #2ecc71 (vert clair, # optionnel)
   - Options pr√©d√©finies : blue, red, magenta, green
   - Code HEX : 6 caract√®res avec ou sans #
   - Valeur par d√©faut : #0078d7 (blue)
   - Impact : Applique sur body et .bsod-container background

6. **reward** (String)
   - Description : R√©compense affich√©e en bas
   - Format : Texte correspondant aux options du select
   - Exemple : ?reward=Caf√©
   - Options : Aucun, Caf√©, Boisson, Croissant, Chocolat, Bonbon, G√¢teau, Pizza, Repas, Bi√®re, Bisous, C√¢lin, Service
   - Valeur par d√©faut : Aucun (cach√©)
   - Impact : Affiche dans #rewardText et montre #rewardDisplay

7. **lock** (Boolean)
   - Description : √âtat du verrouillage (affiche section d√©blocage)
   - Format : Boolean string
   - Exemples : ?lock=true, ?lock=1, ?lock=on
   - Valeurs accept√©es : true, false, 1, 0, on, off
   - Valeur par d√©faut : false (unchecked)
   - Impact : Check/uncheck #toggleLock + updateLockState()

### Exemples d'URLs Compl√®tes

**Configuration Simple :**
index.html?code=TEST123&flagger=Jean

**Configuration Compl√®te :**
index.html?code=ULTIMATE2024&flagger=√âquipe%20S√©curit√©&msg=Bravo!&icon=üèÜ&color=green&reward=Caf√©&lock=true

**Configuration Visuelle :**
index.html?icon=‚ö†Ô∏è&color=red&msg=Tentative%20de%20phishing%20d√©tect√©e!

**Configuration Formation :**
index.html?code=FORMATION&flagger=IT&msg=Module%20termin√©&icon=üéì&color=blue&reward=Croissant&lock=true

**Configuration HEX Custom :**
index.html?icon=üèÜ&color=ff5733&msg=Champion%20de%20la%20s√©curit√©

### Encodage URL
- Espaces : %20 ou +
- Caract√®res sp√©ciaux : Utiliser encodeURIComponent()
- √âmojis : Support natif dans l'URL
- Codes HEX : Avec ou sans # (les deux accept√©s)

ENDPOINTS API (Pr√©vu v2.0)
--------------------------
### POST /api/flag
Enregistre un √©v√©nement de flag
Body : {
  "user": "paul",
  "flagger": "marie",
  "timestamp": "2025-11-05T14:30:00Z",
  "message": "Message personnalis√©",
  "reward": "Caf√©"
}
Response : {
  "success": true,
  "flag_id": 123
}

### POST /api/check_code
V√©rifie un code de d√©blocage
Body : {
  "code": "SEC2024",
  "flag_id": 123
}
Response : {
  "valid": true,
  "message": "Code correct"
}

### GET /api/stats
R√©cup√®re les statistiques
Query : ?period=week&user=paul
Response : {
  "total_flags": 42,
  "top_flaggers": [...],
  "top_flagged": [...],
  "rewards_distributed": {...}
}

COMPORTEMENTS CL√âS
------------------
### Plein √âcran
- D√©clench√© au clic sur bouton FLAG (#startBtn)
- Utilise requestFullscreen() sur document.documentElement
- Compatible tous navigateurs (fallback mozRequestFullScreen, webkitRequestFullscreen)

### Timer/Chronom√®tre
- Format : MM:SS (minutes:secondes, padStart 2 z√©ros)
- D√©marrage : Au clic FLAG, stocke Date.now() dans startTime
- Update : setInterval 1000ms, calcule elapsed time
- Affichage : Dans #timerText, container #timerDisplay (display: block au d√©marrage)
- Arr√™t : clearInterval(timerInterval)

### Syst√®me de Lock
- Toggle : #toggleLock (checkbox, unchecked par d√©faut)
- Si checked : 
  * Affiche #inputSecurityCode (champ code dans config bar)
  * Affiche #unlockSection (section d√©blocage en bas)
- Si unchecked :
  * Cache #inputSecurityCode (display: none)
  * Cache #unlockSection (display: none)

### Validation du Code
- Code attendu : inputSecurityCode.value (depuis config bar)
- Code saisi : unlockInput.value (section d√©blocage)
- Comparaison : toUpperCase() des deux valeurs
- Si valide : showSuccessMessage() avec flagger + r√©compense, ferme apr√®s 3s
- Si invalide : showErrorMessage() rouge 3s

### Messages (Sans Sortie Fullscreen)
- ‚ùå NE JAMAIS utiliser alert() ‚Üí sort du plein √©cran
- ‚úÖ Utiliser overlays personnalis√©s :
  * showErrorMessage() : overlay rouge (#e81123), 3s, animated
  * showSuccessMessage() : overlay vert (#00b300), affiche infos, 3s puis window.close()

### Application Dynamique
- Ic√¥ne : setIconEmoji() ‚Üí met √† jour #emojiBgPreview.textContent
- Couleur : setMainColor() ‚Üí CSS var + body + container background
- Flagger : querySelectorAll('.flagger-name').forEach() ‚Üí textContent
- Message : #custom-message.innerHTML
- R√©compense : #rewardText.textContent + #rewardDisplay (display: block/none)

TESTS & VALIDATION
------------------
### Page de Test
- Fichier : test_url_params.html
- Contenu : 12 exemples cliquables de configurations
- Usage : Ouvrir dans navigateur, cliquer sur les liens pour tester

### Tests Recommand√©s
1. Param√®tres de base : ?code=TEST&flagger=Jean
2. Ic√¥ne + Couleur : ?icon=üö©&color=blue
3. R√©compense : ?reward=Caf√©&icon=‚òï
4. Lock activ√© : ?code=LOCK123&lock=true
5. Config compl√®te : ?code=ALL&flagger=Admin&msg=Test&icon=üèÜ&color=green&reward=Pizza&lock=true

### Validation
- Tous les param√®tres doivent s'appliquer visuellement
- Config bar doit refl√©ter les valeurs URL
- Timer doit d√©marrer au clic FLAG
- Lock doit afficher/cacher les sections appropri√©es
- Messages doivent s'afficher sans sortir du plein √©cran

COMPATIBILIT√â
-------------
### Navigateurs
- ‚úÖ Chrome / Edge (Chromium) : Support complet
- ‚úÖ Firefox : Support complet
- ‚úÖ Safari : Support complet (macOS/iOS)
- ‚úÖ Opera : Support complet

### Versions Minimales
- Chrome 88+ (2021)
- Firefox 85+ (2021)
- Safari 14+ (2020)
- Edge 88+ (2021)

### Features JavaScript
- URLSearchParams : Natif tous navigateurs modernes
- requestFullscreen : Support avec prefixes
- CSS Variables : Support universel (2018+)
- Emoji : Support natif Unicode

ROADMAP TECHNIQUE
-----------------
### v1.0 (05/11/2025) ‚úÖ
- Frontend complet
- Config bar 6 sections
- Timer fonctionnel
- Lock system
- Messages stylis√©s

### v1.1 (05/11/2025) ‚úÖ
- Support 7 param√®tres URL
- Synchronisation URL ‚Üî Config
- Documentation enrichie
- Page de test

### v2.0 (√Ä venir)
- Backend Python/Flask ou Node.js
- API REST compl√®te
- Base de donn√©es SQLite/PostgreSQL
- Dashboard statistiques
- Authentification admin

### v3.0 (Future)
- Integration Active Directory
- Notifications Slack/Teams
- Multi-tenant
- Gamification avanc√©e
- Export donn√©es (CSV/JSON/Excel)

PROCHAINES √âTAPES v2.0
----------------------
1. D√©finir architecture backend (Flask vs Express)
2. Cr√©er sch√©ma de base de donn√©es
3. Impl√©menter endpoints API
4. D√©velopper dashboard de stats
5. Ajouter authentification
6. Tests d'int√©gration frontend ‚Üî backend
7. D√©ploiement (Docker, Cloud)

MAINTENANCE
-----------
### Fichiers √† Surveiller
- css/flag_style.css : Styles principaux (pas de duplications)
- js/flag_script.js : Logique compl√®te + URL params
- index.html : Structure HTML + m√©tadonn√©es

### Versionning
- Git tags pour chaque version majeure/mineure
- Commit messages d√©taill√©s
- Branches : main (stable), dev (d√©veloppement)

### Documentation
- README.md : Documentation utilisateur
- EXEMPLES_URL.md : Guide param√®tres URL
- docs/PROJECT_CONTEXT : Vision globale
- docs/PROJECT_REFERENCE : Ce fichier (r√©f√©rence technique)

CONTACT & SUPPORT
-----------------
D√©veloppeur : Xavier (WolwX)
Email : wolwx@hotmail.com
GitHub : https://github.com/WolwX
Repository : https://github.com/WolwX/Flag
Version : 1.1 (05/11/2025)

¬© 2025 Xavier (WolwX) - Tous droits r√©serv√©s
